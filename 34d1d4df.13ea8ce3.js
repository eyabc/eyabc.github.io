(window.webpackJsonp=window.webpackJsonp||[]).push([[86],{156:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return l})),a.d(t,"metadata",(function(){return p})),a.d(t,"toc",(function(){return s})),a.d(t,"default",(function(){return o}));var n=a(3),i=a(7),r=(a(0),a(474)),l={},p={unversionedId:"nest-js/overview/pipes",id:"nest-js/overview/pipes",isDocsHomePage:!1,title:"pipes",description:"https://docs.nestjs.com/pipes",source:"@site/docs/nest-js/overview/pipes.mdx",slug:"/nest-js/overview/pipes",permalink:"/docs/nest-js/overview/pipes",version:"current",lastUpdatedAt:1645453415,sidebar:"nestJs",previous:{title:"exception-filters",permalink:"/docs/nest-js/overview/exception-filters"},next:{title:"guards",permalink:"/docs/nest-js/overview/guards"}},s=[{value:"Pipe",id:"pipe",children:[]},{value:"Built-in pipes",id:"built-in-pipes",children:[]},{value:"Binding pipes",id:"binding-pipes",children:[]},{value:"Custom pipes",id:"custom-pipes",children:[]},{value:"Schema based validation",id:"schema-based-validation",children:[]},{value:"Object schema validation",id:"object-schema-validation",children:[]},{value:"Binding validation pipes",id:"binding-validation-pipes",children:[]},{value:"Class validator",id:"class-validator",children:[]},{value:"Global scoped pipes",id:"global-scoped-pipes",children:[]},{value:"The built-in ValidationPipe",id:"the-built-in-validationpipe",children:[]},{value:"Transformation use case",id:"transformation-use-case",children:[]},{value:"Providing defaults",id:"providing-defaults",children:[]}],c={toc:s};function o(e){var t=e.components,a=Object(i.a)(e,["components"]);return Object(r.b)("wrapper",Object(n.a)({},c,a,{components:t,mdxType:"MDXLayout"}),Object(r.b)("p",null,Object(r.b)("a",{parentName:"p",href:"https://docs.nestjs.com/pipes"},"https://docs.nestjs.com/pipes")),Object(r.b)("p",null,Object(r.b)("img",{parentName:"p",src:"https://docs.nestjs.com/assets/Pipe_1.png",alt:"pipe"})),Object(r.b)("h2",{id:"pipe"},"Pipe"),Object(r.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(r.b)("div",{parentName:"div",className:"admonition-heading"},Object(r.b)("h5",{parentName:"div"},Object(r.b)("span",{parentName:"h5",className:"admonition-icon"},Object(r.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(r.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"pipe")),Object(r.b)("div",{parentName:"div",className:"admonition-content"},Object(r.b)("p",{parentName:"div"},Object(r.b)("inlineCode",{parentName:"p"},"@Injectable()")," \ub85c \uc5b4\ub178\ud14c\uc774\uc158\ub41c \ud074\ub798\uc2a4\uc774\ub2e4."),Object(r.b)("ul",{parentName:"div"},Object(r.b)("li",{parentName:"ul"},"\ud30c\uc774\ud504\ub4e4\uc740 ",Object(r.b)("inlineCode",{parentName:"li"},"PipeTransform")," \uc778\ud130\ud398\uc774\uc2a4\ub97c \uad6c\ud604\ud574\uc57c \ud55c\ub2e4.")))),Object(r.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(r.b)("div",{parentName:"div",className:"admonition-heading"},Object(r.b)("h5",{parentName:"div"},Object(r.b)("span",{parentName:"h5",className:"admonition-icon"},Object(r.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(r.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"pipe \uc758 \uc804\ud615\uc801\uc778 USE \ucf00\uc774\uc2a4")),Object(r.b)("div",{parentName:"div",className:"admonition-content"},Object(r.b)("ul",{parentName:"div"},Object(r.b)("li",{parentName:"ul"},"transformation",Object(r.b)("ul",{parentName:"li"},Object(r.b)("li",{parentName:"ul"},"\uc778\ud48b \ub370\uc774\ud130\ub97c \uc6d0\ud558\ub294 \ud615\ud0dc\ub85c \ubcc0\ud658\ud55c\ub2e4."),Object(r.b)("li",{parentName:"ul"},"string \u2192 integer"))),Object(r.b)("li",{parentName:"ul"},"validation",Object(r.b)("ul",{parentName:"li"},Object(r.b)("li",{parentName:"ul"},"\uc778\ud48b\ub370\uc774\ud130\ub97c \ud3c9\uac00\ud55c \ud6c4, \uc720\ud6a8\ud558\ub2e4\uba74 unchanged \ud558\uac8c pass \ud55c\ub2e4. \ubb34\ud6a8\ud558\ub2e4\uba74 exception \uc744 \ub358\uc9c4\ub2e4.")))),Object(r.b)("p",{parentName:"div"},"\ub450 \ucf00\uc774\uc2a4\uc5d0\uc11c, \ud30c\uc774\ud504\ub294 \ucee8\ud2b8\ub864\ub7ec \ub77c\uc6b0\ud2b8 \ud578\ub4e4\ub7ec\uc5d0 \uc758\ud574 \ucc98\ub9ac\ub41c arguments \uc5d0\uc11c \uc5f0\uc0b0\ub41c\ub2e4."))),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"Nest \ub294 \uba54\uc11c\ub4dc\uac00 \ud638\ucd9c\ub418\uae30 \uc9c1\uc804\uc5d0, \ud30c\uc774\ud504\ub97c \uc0bd\uc785\ud558\uace0"),Object(r.b)("li",{parentName:"ul"},"\ud30c\uc774\ud504\ub294 \uba54\uc11c\ub4dc\ub97c \ub300\uc0c1\uc73c\ub85c \ud558\ub294 arguments \ub97c \uc218\uc2e0\ud558\uace0 \uc774\uc5d0 \ub300\ud574 \uc791\ub3d9(transformation|validation) \ud55c\ub2e4."),Object(r.b)("li",{parentName:"ul"},"\uc774\ud6c4\uc5d0 transformed arguments \uc640 \ud568\uaed8 \ub77c\uc6b0\ud130 \ud578\ub4e4\ub7ec\uac00 \ud638\ucd9c\ub41c\ub2e4.")),Object(r.b)("div",{className:"admonition admonition-tip alert alert--success"},Object(r.b)("div",{parentName:"div",className:"admonition-heading"},Object(r.b)("h5",{parentName:"div"},Object(r.b)("span",{parentName:"h5",className:"admonition-icon"},Object(r.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},Object(r.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),Object(r.b)("div",{parentName:"div",className:"admonition-content"},Object(r.b)("ul",{parentName:"div"},Object(r.b)("li",{parentName:"ul"},"Nest \uc5d0\ub294 \uc989\uc2dc \uc0ac\uc6a9\ud560 \uc218 \uc788\ub294 \uc5ec\ub7ec \ud30c\uc774\ud504\uac00 \ub0b4\uc7a5\ub418\uc5b4 \uc788\uc2b5\ub2c8\ub2e4."),Object(r.b)("li",{parentName:"ul"},"\uc0ac\uc6a9\uc790 \uc815\uc758 \ud30c\uc774\ud504\ub97c \ub9cc\ub4e4 \uc218\ub3c4 \uc788\uc2b5\ub2c8\ub2e4."),Object(r.b)("li",{parentName:"ul"},"\uc774 \uc7a5\uc5d0\uc11c\ub294 \ub0b4\uc7a5 \ud30c\uc774\ud504\ub97c \uc18c\uac1c\ud558\uace0 \uc774\ub97c \ub77c\uc6b0\ud2b8 \ud578\ub4e4\ub7ec\uc5d0 \ubc14\uc778\ub529\ud558\ub294 \ubc29\ubc95\uc744 \ubcf4\uc5ec\uc90d\ub2c8\ub2e4."),Object(r.b)("li",{parentName:"ul"},"\uadf8\ub7f0 \ub2e4\uc74c \uba87 \uac00\uc9c0 \ub9de\ucda4\ud615 \ud30c\uc774\ud504\ub97c \uac80\ud1a0\ud558\uc5ec \ucc98\uc74c\ubd80\ud130 \ud30c\uc774\ud504\ub97c \uad6c\ucd95\ud558\ub294 \ubc29\ubc95\uc744 \ubcf4\uc5ec\uc90d\ub2c8\ub2e4.")))),Object(r.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(r.b)("div",{parentName:"div",className:"admonition-heading"},Object(r.b)("h5",{parentName:"div"},Object(r.b)("span",{parentName:"h5",className:"admonition-icon"},Object(r.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(r.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"pipe \ub294 \uc608\uc678 \uc601\uc5ed \ub0b4\uc5d0\uc11c \uc2e4\ud589\ub41c\ub2e4")),Object(r.b)("div",{parentName:"div",className:"admonition-content"},Object(r.b)("p",{parentName:"div"},"pipe \uac00 \uc608\uc678\ub97c \ub358\uc9c8 \ub54c Exception Layer \uc5d0\uc11c \ucc98\ub9ac\ub41c\ub2e4."),Object(r.b)("ul",{parentName:"div"},Object(r.b)("li",{parentName:"ul"},"\ud30c\uc774\ud504\uc5d0\uc11c \uc608\uc678\uac00 \ubc1c\uc0dd\ud558\uba74, \uc774\ud6c4\uc5d0 \ucee8\ud2b8\ub864\ub7ec \uba54\uc11c\ub4dc\uac00 \uc2e4\ud589\ub418\uc9c0 \uc54a\ub294\ub2e4."),Object(r.b)("li",{parentName:"ul"},"\uc2dc\uc2a4\ud15c \uacbd\uacc4\uc758 \uc678\ubd80 \uc18c\uc2a4\uc5d0\uc11c \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc73c\ub85c \ub4e4\uc5b4\uc624\ub294 \ub370\uc774\ud130\ub97c \uac80\uc99d\ud558\uae30 \uc704\ud55c \ubaa8\ubc94 \uc0ac\ub840 \uae30\uc220\uc744 \uc81c\uacf5\ud55c\ub2e4.")))),Object(r.b)("h2",{id:"built-in-pipes"},"Built-in pipes"),Object(r.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(r.b)("div",{parentName:"div",className:"admonition-heading"},Object(r.b)("h5",{parentName:"div"},Object(r.b)("span",{parentName:"h5",className:"admonition-icon"},Object(r.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(r.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"Built-in pipes")),Object(r.b)("div",{parentName:"div",className:"admonition-content"},Object(r.b)("ul",{parentName:"div"},Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"ValidationPipe")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"ParseIntPipe")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"ParseFloatPipe")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"ParseBoolPipe")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"ParseArrayPipe")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"ParseUUIDPipe")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"ParseEnumPipe")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"DefaultValuePipe"))))),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"ParseIntPipe")," \ub97c \uc608\ub97c\ub4e4\uba74,"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"transformation use case"),Object(r.b)("li",{parentName:"ul"},"\uba54\uc11c\ub4dc \ud578\ub4e4\ub7ec \ub9e4\uac1c\ubcc0\uc218\uac00 JS Integer \ub85c \ubcc0\ud658\ub420 \ub54c \uc2e4\ud328\ud55c\ub2e4\uba74, \uc608\uc678\ub97c \ub358\uc9c4\ub2e4.")),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-typescript",metastring:'title="ParseIntPipe"',title:'"ParseIntPipe"'},"import { ArgumentMetadata, PipeTransform } from '../interfaces/features/pipe-transform.interface';\nimport { ErrorHttpStatusCode } from '../utils/http-error-by-code.util';\nexport interface ParseIntPipeOptions {\n    errorHttpStatusCode?: ErrorHttpStatusCode;\n    exceptionFactory?: (error: string) => any;\n}\n/**\n * Defines the built-in ParseInt Pipe\n *\n * @see [Built-in Pipes](https://docs.nestjs.com/pipes#built-in-pipes)\n *\n * @publicApi\n */\nexport declare class ParseIntPipe implements PipeTransform<string> {\n    protected exceptionFactory: (error: string) => any;\n    constructor(options?: ParseIntPipeOptions);\n    /**\n     * Method that accesses and performs optional transformation on argument for\n     * in-flight requests.\n     *\n     * @param value currently processed route argument\n     * @param metadata contains metadata about the currently processed route argument\n     */\n    transform(value: string, metadata: ArgumentMetadata): Promise<number>;\n}\n")),Object(r.b)("h2",{id:"binding-pipes"},"Binding pipes"),Object(r.b)("p",null,"\ud30c\uc774\ud504 \ud074\ub798\uc2a4\uc758 \uc778\uc2a4\ud134\uc2a4\ub97c \uc801\uc808\ud55c \ucee8\ud14d\uc2a4\ud2b8\uc5d0 \ubc14\uc778\ub4dc \ud574\uc57c \ud55c\ub2e4."),Object(r.b)("p",null,"\uc608\ub97c\ub4e4\uc5b4 ParseIntPipe, \ud30c\uc774\ud504\ub97c \ub77c\uc6b0\ud2b8 \ud578\ub4e4\ub7ec \uba54\uc11c\ub4dc\uc640 \uc5f0\uacc4\ud558\ub824\uace0 \ud55c\ub2e4."),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"method parameter level \uc5d0\uc11c \ud30c\uc774\ud504\ub97c \ubc14\uc778\ub529\ud558\uc600\ub2e4."),Object(r.b)("li",{parentName:"ul"},"\uc778\uc2a4\ud134\uc2a4\uac00 \uc544\ub2cc \ud074\ub798\uc2a4(ParseIntPipe)\ub97c \uc804\ub2ec\ud558\uc5ec \uc778\uc2a4\ud134\uc2a4\ud654\uc5d0 \ub300\ud55c \ucc45\uc784\uc744 \ud504\ub808\uc784\uc6cc\ud06c\uc5d0 \ub0a8\uaca8\ub450\uace0 \uc885\uc18d\uc131 \uc8fc\uc785\uc744 \ud65c\uc131\ud654\ud569\ub2c8\ub2e4.")),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-typescript",metastring:'title="1. \ud074\ub798\uc2a4 pipe \uc804\ub2ec" {2}',title:'"1.',"\ud074\ub798\uc2a4":!0,pipe:!0,'\uc804\ub2ec"':!0,"{2}":!0},"@Get(':id')\nasync findOne(@Param('id', ParseIntPipe) id: number) {\n  return this.catsService.findOne(id);\n}\n")),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"findOne()")," \uba54\uc11c\ub4dc\uc5d0 \ub9e4\uac1c\ubcc0\uc218\uac00 number \ud0c0\uc785\uc774\ub77c\uba74 \uc9c4\ud589\ub418\uace0, \uadf8\ub807\uc9c0 \uc54a\uc73c\uba74 \ub77c\uc6b0\ud130\ud578\ub4e4\ub7ec\uac00 \ud638\ucd9c\ub418\uae30 \uc804\uc5d0 \uc5d0\ub7ec\ub97c \ub358\uc9c4\ub2e4."),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-json",metastring:'title="GET localhost:3000/abc"',title:'"GET','localhost:3000/abc"':!0},'{\n  "statusCode": 400,\n  "message": "Validation failed (numeric string is expected)",\n  "error": "Bad Request"\n}\n')),Object(r.b)("p",null,"\ub0b4\ubd80 \uc778\uc2a4\ud134\uc2a4\ub97c \uc804\ub2ec\ud558\ub294 \uac83\uc740 \uc635\uc158\uc744 \uc804\ub2ec\ud558\uc5ec \ub0b4\uc7a5 \ud30c\uc774\ud504\uc758 \ub3d9\uc791\uc744 \uc0ac\uc6a9\uc790 \uc815\uc758\ud558\ub824\ub294 \uacbd\uc6b0 \uc720\uc6a9\ud569\ub2c8\ub2e4."),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-typescript",metastring:'title="2. \ud074\ub798\uc2a4 \uc778\uc2a4\ud134\uc2a4 \uc804\ub2ec" {3}',title:'"2.',"\ud074\ub798\uc2a4":!0,"\uc778\uc2a4\ud134\uc2a4":!0,'\uc804\ub2ec"':!0,"{3}":!0},"@Get(':id')\nasync findOne(\n  @Param('id', new ParseIntPipe({ errorHttpStatusCode: HttpStatus.NOT_ACCEPTABLE }))\n  id: number,\n) {\n  return this.catsService.findOne(id);\n}\n")),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-typescript",metastring:'title="query string parameter Pipe" {2}',title:'"query',string:!0,parameter:!0,'Pipe"':!0,"{2}":!0},"@Get()\nasync findOne(@Query('id', ParseIntPipe) id: number) {\n  return this.catsService.findOne(id);\n}\n")),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-typescript",metastring:'title="ParseUUIDPipe::parse a string parameter and validate if it is a UUID" {2}',title:'"ParseUUIDPipe::parse',a:!0,string:!0,parameter:!0,and:!0,validate:!0,if:!0,it:!0,is:!0,'UUID"':!0,"{2}":!0},"@Get(':uuid')\nasync findOne(@Param('uuid', new ParseUUIDPipe()) uuid: string) {\n  return this.catsService.findOne(uuid);\n}\n// ParseUUIDPipe()\ub97c \uc0ac\uc6a9\ud560 \ub54c \ubc84\uc804 3, 4 \ub610\ub294 5\uc5d0\uc11c UUID\ub97c \uad6c\ubb38 \ubd84\uc11d\ud569\ub2c8\ub2e4. \ud2b9\uc815 \ubc84\uc804\uc758 UUID\ub9cc \ud544\uc694\ud55c \uacbd\uc6b0 \ud30c\uc774\ud504 \uc635\uc158\uc5d0\uc11c \ubc84\uc804\uc744 \uc804\ub2ec\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\n")),Object(r.b)("h2",{id:"custom-pipes"},"Custom pipes"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-typescript",metastring:'title="validation.pipe.ts::behaving like an identity function." {4,5}',title:'"validation.pipe.ts::behaving',like:!0,an:!0,identity:!0,'function."':!0,"{4,5}":!0},"import { PipeTransform, Injectable, ArgumentMetadata } from '@nestjs/common';\n\n@Injectable()\nexport class ValidationPipe implements PipeTransform {\n  transform(value: any, metadata: ArgumentMetadata) {\n    return value;\n  }\n}\n")),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-typescript",metastring:'title="PipeTransform"',title:'"PipeTransform"'},"import { Type } from '../type.interface';\nimport { Paramtype } from './paramtype.interface';\nexport declare type Transform<T = any> = (value: T, metadata: ArgumentMetadata) => any;\n/**\n * Interface describing a pipe implementation's `transform()` method metadata argument.\n *\n * @see [Pipes](https://docs.nestjs.com/pipes)\n *\n * @publicApi\n */\nexport interface ArgumentMetadata {\n    /**\n     * Indicates whether argument is a body, query, param, or custom parameter\n     */\n    readonly type: Paramtype;\n    /**\n     * Underlying base type (e.g., `String`) of the parameter, based on the type\n     * definition in the route handler.\n     * undefined \ud0c0\uc785\uc774\ub77c\uba74,\n     *  *  \ub77c\uc6b0\ud2b8 \ud578\ub4e4\ub7ec \uba54\uc18c\ub4dc signature \uc5d0\uc11c type \uc120\uc5b8\uc744 \uc0dd\ub7b5\ud55c \uacbd\uc6b0\n     *  *  \ubc14\ub2d0\ub77c JavaScript\ub97c \uc0ac\uc6a9\ud558\ub294 \uacbd\uc6b0.\n     *  TS interface \uc774\ub77c\uba74,\n     *  *  \ud2b8\ub79c\uc2a4\ucef4\ud30c\uc77c \uc2dc \uc5c6\uc5b4\uc9c0\uae30 \ub54c\ubb38\uc5d0, Object \ud0c0\uc785\uc73c\ub85c \uc778\uc2dd\ub41c\ub2e4.\n     */\n    readonly metatype?: Type<any> | undefined;\n    /**\n     * String passed as an argument to the decorator.\n     * Example: `@Body('userId')` would yield `userId`\n     */\n    readonly data?: string | undefined;\n}\n/**\n * Interface describing implementation of a pipe.\n *\n * @see [Pipes](https://docs.nestjs.com/pipes)\n *\n * @publicApi\n */\nexport interface PipeTransform<T = any, R = any> {\n    /**\n     * Method to implement a custom pipe.  Called with two parameters\n     *\n     * @param value argument before it is received by route handler method\n     * @param metadata contains metadata about the value\n     */\n    transform(value: T, metadata: ArgumentMetadata): R;\n}\n")),Object(r.b)("h2",{id:"schema-based-validation"},"Schema based validation"),Object(r.b)("p",null,"validation pipe \ub97c \uc880 \ub354 \uc720\uc6a9\ud558\uac8c \ub9cc\ub4e4 \uc218 \uc788\ub2e4."),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-typescript",metastring:"{2}","{2}":!0},"@Post()\nasync create(@Body() createCatDto: CreateCatDto) {\n  this.catsService.create(createCatDto);\n}\n\nexport class CreateCatDto {\n  name: string;\n  age: number;\n  breed: string;\n}\n")),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"createCatDto")," \uc758 \uc720\ud6a8\uc131\uc744 \uac80\uc99d\ud558\ub294 FALSY \ubc29\ubc95"),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},"\ub77c\uc6b0\ud130 \ud578\ub4e4\ub7ec \uba54\uc11c\ub4dc\uc5d0\uc11c \uac80\uc99d \u2192 SRP(Single Responsibility Principle) \uc704\ubc18"),Object(r.b)("li",{parentName:"ol"},"validator \ud074\ub798\uc2a4 \uc0dd\uc131 \u2192 \uba54\uc11c\ub4dc \uc2dc\uc791 \ub9c8\ub2e4 validator \ub97c \ud638\ucd9c\ud574 \uc918\uc57c \ud55c\ub2e4."),Object(r.b)("li",{parentName:"ol"},"validation middleware \u2192",Object(r.b)("ul",{parentName:"li"},Object(r.b)("li",{parentName:"ul"},"\uc804\uccb4 \uc751\uc6a9 \ud504\ub85c\uadf8\ub7a8\uc758 \ubaa8\ub4e0 \ucee8\ud14d\uc2a4\ud2b8\uc5d0\uc11c \uc0ac\uc6a9\ud560 \uc218 \uc788\ub294 \uc77c\ubc18 \ubbf8\ub4e4\uc6e8\uc5b4\ub97c \ub9cc\ub4dc\ub294 \uac83\uc740 \ubd88\uac00\ub2a5\ud569\ub2c8\ub2e4."),Object(r.b)("li",{parentName:"ul"},"\ubbf8\ub4e4\uc6e8\uc5b4\uac00 \ud638\ucd9c\ub420 \ud578\ub4e4\ub7ec\uc640 \ud574\ub2f9 \ub9e4\uac1c\ubcc0\uc218\ub97c \ud3ec\ud568\ud558\uc5ec \uc2e4\ud589 \ucee8\ud14d\uc2a4\ud2b8\ub97c \uc778\uc2dd\ud558\uc9c0 \ubabb\ud558\uae30 \ub54c\ubb38\uc785\ub2c8\ub2e4.")))),Object(r.b)("h2",{id:"object-schema-validation"},"Object schema validation"),Object(r.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(r.b)("div",{parentName:"div",className:"admonition-heading"},Object(r.b)("h5",{parentName:"div"},Object(r.b)("span",{parentName:"h5",className:"admonition-icon"},Object(r.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(r.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"Joi library")),Object(r.b)("div",{parentName:"div",className:"admonition-content"},Object(r.b)("p",{parentName:"div"},"\uc2a4\ud0a4\ub9c8\ub97c \ub9cc\ub4dc\ub294 \uc9c1\uad00\uc801\uc774\uba70 \uac00\ub3c5\uc131\uc774 \uc88b\uc740 API \uc744 \uc81c\uacf5\ud55c\ub2e4."),Object(r.b)("pre",{parentName:"div"},Object(r.b)("code",{parentName:"pre",className:"language-shell"},"$ npm install --save joi\n$ npm install --save-dev @types/joi\n")))),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-typescript",metastring:'title="Simple JoiValidationPipe class" {2,6,9}',title:'"Simple',JoiValidationPipe:!0,'class"':!0,"{2,6,9}":!0},"import { PipeTransform, Injectable, ArgumentMetadata, BadRequestException } from '@nestjs/common';\nimport { ObjectSchema } from 'joi';\n\n@Injectable()\nexport class JoiValidationPipe implements PipeTransform {\n  constructor(private schema: ObjectSchema) {}\n\n  transform(value: any, metadata: ArgumentMetadata) {\n    const { error } = this.schema.validate(value);\n    if (error) {\n      throw new BadRequestException('Validation failed');\n    }\n    return value;\n  }\n}\n")),Object(r.b)("p",null,"\ub2e4\uc74c \uc138\uc158\uc5d0\uc11c, ",Object(r.b)("inlineCode",{parentName:"p"},"@UsePipes")," \ub85c \ucee8\ud2b8\ub864\ub7ec \uba54\uc11c\ub4dc\uc5d0\uac8c \uc801\uc808\ud55c schema \ub97c \uc81c\uacf5\ud558\ub294 \ubc29\ubc95\uc744 \ub2e4\ub8ec\ub2e4."),Object(r.b)("h2",{id:"binding-validation-pipes"},"Binding validation pipes"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-typescript",metastring:'title="method call level \ud30c\uc774\ud504 \ubc14\uc778\ub529 :: JoiValidationPipe \uc0ac\uc6a9\ud558\uae30 [method-scoped pipe]" {2}',title:'"method',call:!0,level:!0,"\ud30c\uc774\ud504":!0,"\ubc14\uc778\ub529":!0,"::":!0,JoiValidationPipe:!0,"\uc0ac\uc6a9\ud558\uae30":!0,"[method-scoped":!0,'pipe]"':!0,"{2}":!0},"@Post()\n@UsePipes(new JoiValidationPipe(createCatSchema))\nasync create(@Body() createCatDto: CreateCatDto) {\n  this.catsService.create(createCatDto);\n}\n")),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"@UsePipes")," Process"),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},Object(r.b)("inlineCode",{parentName:"li"},"JoiValidationPipe")," \uc758 \uc778\uc2a4\ud134\uc2a4\ub97c \uc0dd\uc131\ud55c\ub2e4."),Object(r.b)("li",{parentName:"ol"},"pipe \uc758 \uc0dd\uc131\uc790\uc5d0 Joi schema \ub97c pass \ud55c\ub2e4."),Object(r.b)("li",{parentName:"ol"},"pipe \ub97c \uba54\uc11c\ub4dc\uc5d0 \ubc14\uc778\ub4dc \ud55c\ub2e4.")),Object(r.b)("h2",{id:"class-validator"},"Class validator"),Object(r.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(r.b)("div",{parentName:"div",className:"admonition-heading"},Object(r.b)("h5",{parentName:"div"},Object(r.b)("span",{parentName:"h5",className:"admonition-icon"},Object(r.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(r.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),Object(r.b)("a",{parentName:"h5",href:"https://github.com/typestack/class-validator"},"class-validator")," library")),Object(r.b)("div",{parentName:"div",className:"admonition-content"},Object(r.b)("ul",{parentName:"div"},Object(r.b)("li",{parentName:"ul"},"Nest \ub294 ",Object(r.b)("inlineCode",{parentName:"li"},"class-validator")," library \uc640 \uc798 \ub3d9\uc791\ud569\ub2c8\ub2e4."),Object(r.b)("li",{parentName:"ul"},"\uac15\ub825\ud55c \ub370\ucf54\ub808\uc774\ud130 \uae30\ubc18 validation \uc744 \uc81c\uacf5\ud55c\ub2e4.",Object(r.b)("ul",{parentName:"li"},Object(r.b)("li",{parentName:"ul"},"decorator-based validation \uc740 \ucc98\ub9ac\ub41c \ud504\ub85c\ud37c\ud2f0\uc758 ",Object(r.b)("inlineCode",{parentName:"li"},"metatype")," \uc5d0 \uc811\uadfc\ud560 \uc218 \uc788\uae30 \ub54c\ubb38\uc5d0\nNest \uc758 Pipe \uc640 \uacb0\ud569\ub420 \ub54c \uac15\ub825\ud558\ub2e4.")))),Object(r.b)("pre",{parentName:"div"},Object(r.b)("code",{parentName:"pre",className:"language-shell"},"$ npm i --save class-validator class-transformer\n")),Object(r.b)("p",{parentName:"div"},"class-transformer"),Object(r.b)("ul",{parentName:"div"},Object(r.b)("li",{parentName:"ul"},"same author as the class-validator library"),Object(r.b)("li",{parentName:"ul"},"and as a result, they play very well together.")))),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-typescript",metastring:'title="create-cat.dto.ts" {1,4,7,10}',title:'"create-cat.dto.ts"',"{1,4,7,10}":!0},"import { IsString, IsInt } from 'class-validator';\n\nexport class CreateCatDto {\n  @IsString()\n  name: string;\n\n  @IsInt()\n  age: number;\n\n  @IsString()\n  breed: string;\n}\n")),Object(r.b)("div",{className:"admonition admonition-tip alert alert--success"},Object(r.b)("div",{parentName:"div",className:"admonition-heading"},Object(r.b)("h5",{parentName:"div"},Object(r.b)("span",{parentName:"h5",className:"admonition-icon"},Object(r.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},Object(r.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Advantage")),Object(r.b)("div",{parentName:"div",className:"admonition-content"},Object(r.b)("p",{parentName:"div"},"CreateCatDto \ud074\ub798\uc2a4\ub294 Post \ubcf8\ubb38 \uac1c\uccb4\uc5d0 \ub300\ud55c \ub2e8\uc77c \uc18c\uc2a4\ub85c \uc720\uc9c0\ub429\ub2c8\ub2e4(\ubcc4\ub3c4\uc758 \uc720\ud6a8\uc131 \uac80\uc0ac \ud074\ub798\uc2a4\ub97c \ub9cc\ub4e4 \ud544\uc694\uac00 \uc5c6\uc74c)."))),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-typescript",metastring:'title="validation.pipe.ts::uses class-validator annotations." {7,8,11}',title:'"validation.pipe.ts::uses',"class-validator":!0,'annotations."':!0,"{7,8,11}":!0},"import { PipeTransform, Injectable, ArgumentMetadata, BadRequestException } from '@nestjs/common';\nimport { validate } from 'class-validator';\nimport { plainToClass } from 'class-transformer';\n\n@Injectable()\nexport class ValidationPipe implements PipeTransform<any> {\n  async transform(value: any, { metatype }: ArgumentMetadata) {\n    if (!metatype || !this.toValidate(metatype)) {\n      return value;\n    }\n    const object = plainToClass(metatype, value);\n    const errors = await validate(object);\n    if (errors.length > 0) {\n      throw new BadRequestException('Validation failed');\n    }\n    return value;\n  }\n\n  private toValidate(metatype: Function): boolean {\n    const types: Function[] = [String, Boolean, Number, Array, Object];\n    return !types.includes(metatype);\n  }\n}\n")),Object(r.b)("p",null,"{7} ",Object(r.b)("inlineCode",{parentName:"p"},"transform()")," \ub294 \ube44\ub3d9\uae30 \uba54\uc11c\ub4dc\uc774\ub2e4."),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"Nest \ub294 \ub3d9\uae30\uc640 \ube44\ub3d9\uae30 \ud30c\uc774\ud504\ub97c \uc9c0\uc6d0\ud55c\ub2e4."),Object(r.b)("li",{parentName:"ul"},"(utilize Promises) \uc640 \uac19\uc774 class-validator validations \uc774 \uac00\ub054 \ube44\ub3d9\uae30 \uc774\uae30 \ub54c\ubb38\uc774\ub2e4.")),Object(r.b)("p",null,"{7} ArgumentMetadata \uc73c\ub85c\ubd80\ud130 metatype \ud544\ub4dc\ub97c destructuring \ud558\uc600\ub2e4."),Object(r.b)("p",null,"{8} \ud5ec\ud37c \ud568\uc218 ",Object(r.b)("inlineCode",{parentName:"p"},"toValidate()")),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"native JavaScript type \uc77c \ub54c, \uc720\ud6a8\uc131 \uac80\uc0ac\ub97c \uc2e4\ud589\ud558\uc9c0 \uc54a\ub294\ub2e4.")),Object(r.b)("p",null,"{11} class-transformer function ",Object(r.b)("inlineCode",{parentName:"p"},"plainToClass()")),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"validation \uc744 \uc801\uc6a9\ud558\uae30 \uc704\ud574, \uc21c\uc218 JS argument \uac1d\uccb4\ub97c Typed \uac1d\uccb4\ub85c \ubcc0\ud658\ud55c\ub2e4."),Object(r.b)("li",{parentName:"ul"},"\ub124\ud2b8\uc6cc\ud06c request \ub85c \ubd80\ud130 deserialized \ub420 \ub54c, post body \ub294 \ud0c0\uc785 \uc815\ubcf4\uac00 \uc5c6\ub294 \uac1d\uccb4\uc774\ub2e4. (underlying platform, such as Express, works)."),Object(r.b)("li",{parentName:"ul"},"Class-validator \ub294 DTO \uc758 decorated \uac1d\uccb4\ub97c \ub2e4\ub8e8\uae30 \uc704\ud574 \ubcc0\ud658\uc774 \ud544\uc694\ud558\ub2e4.")),Object(r.b)("p",null,"\ub9c8\uc9c0\ub9c9\uc73c\ub85c, validation pipe \ub294 \ubcc0\uacbd\ub418\uc9c0 \uc54a\ub294 value \ub97c \ub9ac\ud134\ud558\uac70\ub098, \uc5d0\ub7ec\ub97c \ub358\uc9c4\ub2e4."),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-typescript",metastring:'title="cats.controller.ts :: ValidationPipe \ubc14\uc778\ub529\ud558\uae30 [parameter-scoped pipe]"',title:'"cats.controller.ts',"::":!0,ValidationPipe:!0,"\ubc14\uc778\ub529\ud558\uae30":!0,"[parameter-scoped":!0,'pipe]"':!0},"@Post()\nasync create(\n  @Body(new ValidationPipe()) createCatDto: CreateCatDto,\n) {\n  this.catsService.create(createCatDto);\n}\n")),Object(r.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(r.b)("div",{parentName:"div",className:"admonition-heading"},Object(r.b)("h5",{parentName:"div"},Object(r.b)("span",{parentName:"h5",className:"admonition-icon"},Object(r.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(r.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"\ud30c\uc774\ud504\uc758 \uc2a4\ucf54\ud504")),Object(r.b)("div",{parentName:"div",className:"admonition-content"},Object(r.b)("ul",{parentName:"div"},Object(r.b)("li",{parentName:"ul"},"parameter-scoped"),Object(r.b)("li",{parentName:"ul"},"method-scoped"),Object(r.b)("li",{parentName:"ul"},"controller-scoped"),Object(r.b)("li",{parentName:"ul"},"global-scoped")))),Object(r.b)("h2",{id:"global-scoped-pipes"},"Global scoped pipes"),Object(r.b)("p",null,"\uc804\uc5ed \ud30c\uc774\ud504\ub294 \ubaa8\ub4e0 Controller \uc640 \ubaa8\ub4e0 route handler, \uc5b4\ud50c\ub9ac\ucf00\uc774\uc158 \uc804\ubc18\uc5d0\uc11c \uc0ac\uc6a9\uac00\ub2a5\ud558\ub2e4."),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-typescript",metastring:'title="main.ts :: \uc758\uc874\uc131 \uc8fc\uc785\uc774 \ubd88\uac00\ub2a5\ud55c \uc804\uc5ed pipe" {3}',title:'"main.ts',"::":!0,"\uc758\uc874\uc131":!0,"\uc8fc\uc785\uc774":!0,"\ubd88\uac00\ub2a5\ud55c":!0,"\uc804\uc5ed":!0,'pipe"':!0,"{3}":!0},"async function bootstrap() {\n  const app = await NestFactory.create(AppModule);\n  app.useGlobalPipes(new ValidationPipe());\n  await app.listen(3000);\n}\nbootstrap();\n")),Object(r.b)("p",null,"ValidationPipe \ub294 \uac00\ub2a5\ud55c \ud55c generic \ud558\uac8c \uc0dd\uc131\ub418\uc5c8\ub2e4."),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"\uc804\uccb4 \uc751\uc6a9 \ud504\ub85c\uadf8\ub7a8\uc758 \ubaa8\ub4e0 route handler \uc5d0 \uc801\uc6a9\ub418\ub3c4\ub85d global-scoped pipe \ub85c \uc124\uc815\ud558\uc5ec\n\uc644\uc804\ud55c utility \uc784\uc744 \uc54c \uc218 \uc788\uc2b5\ub2c8\ub2e4.")),Object(r.b)("div",{className:"admonition admonition-warning alert alert--danger"},Object(r.b)("div",{parentName:"div",className:"admonition-heading"},Object(r.b)("h5",{parentName:"div"},Object(r.b)("span",{parentName:"h5",className:"admonition-icon"},Object(r.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},Object(r.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"warning")),Object(r.b)("div",{parentName:"div",className:"admonition-content"},Object(r.b)("p",{parentName:"div"},Object(r.b)("a",{parentName:"p",href:"https://docs.nestjs.com/faq/hybrid-application"},"\ud558\uc774\ube0c\ub9ac\ub4dc \uc571")," \uc5d0\uc11c  ",Object(r.b)("inlineCode",{parentName:"p"},"useGlobalPipes()"),' \uba54\uc11c\ub4dc\ub294,\n\uac8c\uc774\ud2b8\uc6e8\uc774 \ubc0f \ub9c8\uc774\ud06c\ub85c \uc11c\ube44\uc2a4\uc5d0 \ub300\ud55c \ud30c\uc774\ud504\ub97c \uc124\uc815\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.\n"\ud45c\uc900"(\ube44\ud558\uc774\ube0c\ub9ac\ub4dc) \ub9c8\uc774\ud06c\ub85c \uc11c\ube44\uc2a4 \uc571\uc758 \uacbd\uc6b0 useGlobalPipes()\ub294 \ud30c\uc774\ud504\ub97c \uc804\uc5ed\uc801\uc73c\ub85c \ub9c8\uc6b4\ud2b8\ud569\ub2c8\ub2e4.'))),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-typescript",metastring:'title="app.module.ts :: \uc758\uc874\uc131 \uc8fc\uc785\uc774 \uac00\ub2a5\ud55c \uc804\uc5ed pipe" {7,8}',title:'"app.module.ts',"::":!0,"\uc758\uc874\uc131":!0,"\uc8fc\uc785\uc774":!0,"\uac00\ub2a5\ud55c":!0,"\uc804\uc5ed":!0,'pipe"':!0,"{7,8}":!0},"import { Module } from '@nestjs/common';\nimport { APP_PIPE } from '@nestjs/core';\n\n@Module({\n  providers: [\n    {\n      provide: APP_PIPE,\n      useClass: ValidationPipe,\n    },\n  ],\n})\nexport class AppModule {}\n")),Object(r.b)("p",null,"pipe \uac00 \uc5b4\ub5a4 \ubaa8\ub4c8\uc5d0\uc11c \uc8fc\uc785\ub418\ub4e0, \uc804\uc5ed pipe \uac00 \ub41c\ub2e4."),Object(r.b)("h2",{id:"the-built-in-validationpipe"},"The built-in ValidationPipe"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"\ucc38\uace0\ub85c, ValidationPipe \ub294 Nest \uc5d0\uc11c \uae30\ubcf8 \uc81c\uacf5\ub418\ubbc0\ub85c, generic validation Pipe \ub97c \uc9c1\uc811 \uad6c\ucd95\ud560 \ud544\uc694\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."),Object(r.b)("li",{parentName:"ul"},"\ub0b4\uc7a5 ValidationPipe \ub294 \uc774 \uc7a5\uc5d0\uc11c \ub9cc\ub4e0 \uc0d8\ud50c\ubcf4\ub2e4 \ub354 \ub9ce\uc740 \uc635\uc158\uc744 \uc81c\uacf5\ud569\ub2c8\ub2e4.")),Object(r.b)("h2",{id:"transformation-use-case"},"Transformation use case"),Object(r.b)("p",null,"Transformation pipes \ub294 client request \uacfc the request handler \uc0ac\uc774\uc5d0 function \uc744 \uc218\ud589\ud560 \uc218 \uc788\ub2e4."),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},"string \u2192 integer \ubcc0\ud658"),Object(r.b)("li",{parentName:"ol"},"\ud544\uc694\ud55c \ub370\uc774\ud130 fields \uac00 \ub204\ub77d\ub418\uc5b4 \uc788\uc744 \ub54c, default \uac12\uc744 \uc801\uc6a9\ud558\uae30 \uc704\ud568.")),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-typescript",metastring:'title="parse-int.pipe.ts"',title:'"parse-int.pipe.ts"'},"import { PipeTransform, Injectable, ArgumentMetadata, BadRequestException } from '@nestjs/common';\n\n@Injectable()\nexport class ParseIntPipe implements PipeTransform<string, number> {\n  transform(value: string, metadata: ArgumentMetadata): number {\n    const val = parseInt(value, 10);\n    if (isNaN(val)) {\n      throw new BadRequestException('Validation failed');\n    }\n    return val;\n  }\n}\n")),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-typescript"},"@Get(':id')\nasync findOne(@Param('id', new ParseIntPipe()) id) {\n  return this.catsService.findOne(id);\n}\n")),Object(r.b)("p",null,"\uc704 \uc608\uc2dc \ubcf4\ub2e4, Nest \ub294 \ub354 \uc815\uad50\ud55c \ub0b4\uc7a5 ParseIntPipe \ub97c \uac00\uc9c0\uace0 \uc788\uc2b5\ub2c8\ub2e4."),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-typescript",metastring:'title="\uc720\uc6a9\ud55c \ubcc0\ud658 \uc0ac\ub840 3. \uc694\uccad\uc5d0 \uc81c\uacf5\ub41c ID\ub97c \uc0ac\uc6a9\ud558\uc5ec \ub370\uc774\ud130\ubca0\uc774\uc2a4\uc5d0\uc11c userEntity \ub97c \uc120\ud0dd"',title:'"\uc720\uc6a9\ud55c',"\ubcc0\ud658":!0,"\uc0ac\ub840":!0,"3.":!0,"\uc694\uccad\uc5d0":!0,"\uc81c\uacf5\ub41c":!0,"ID\ub97c":!0,"\uc0ac\uc6a9\ud558\uc5ec":!0,"\ub370\uc774\ud130\ubca0\uc774\uc2a4\uc5d0\uc11c":!0,userEntity:!0,"\ub97c":!0,'\uc120\ud0dd"':!0},"@Get(':id')\nfindOne(@Param('id', UserByIdPipe) userEntity: UserEntity) {\n  return userEntity;\n}\n")),Object(r.b)("h2",{id:"providing-defaults"},"Providing defaults"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-typescript",metastring:'title="DefaultValuePipe" {3,4}',title:'"DefaultValuePipe"',"{3,4}":!0},"@Get()\nasync findAll(\n  @Query('activeOnly', new DefaultValuePipe(false), ParseBoolPipe) activeOnly: boolean,\n  @Query('page', new DefaultValuePipe(0), ParseIntPipe) page: number,\n) {\n  return this.catsService.findAll({ activeOnly, page });\n}\n")),Object(r.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(r.b)("div",{parentName:"div",className:"admonition-heading"},Object(r.b)("h5",{parentName:"div"},Object(r.b)("span",{parentName:"h5",className:"admonition-icon"},Object(r.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(r.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"Default_Value_Pipe")),Object(r.b)("div",{parentName:"div",className:"admonition-content"},Object(r.b)("ul",{parentName:"div"},Object(r.b)("li",{parentName:"ul"},"Parse* pipes \ub294 null \ud639\uc740 undefined \uac12\uc744 \uc218\uc2e0\ud560 \ub54c \uc5d0\ub7ec\ub97c \ub358\uc9c4\ub2e4."),Object(r.b)("li",{parentName:"ul"},"\ub204\ub77d\ub41c querystring parameter \uac12\uc5d0, default value \ub97c \uc81c\uacf5\ud560 \uc218 \uc788\ub2e4."),Object(r.b)("li",{parentName:"ul"},"Parse* pipes \uac00 \uc5f0\uc0b0\ub418\uae30 \uc804\uc5d0 \uae30\ubcf8 \uac12\uc744 \uc8fc\uc785 \ud55c\ub2e4."),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"@Query()")," \uc758 Parse* pipes \uc804\uc5d0 \ucd08\uae30\ud654\ub97c \ud574\uc918\uc57c \ud55c\ub2e4.")))))}o.isMDXComponent=!0},474:function(e,t,a){"use strict";a.d(t,"a",(function(){return b})),a.d(t,"b",(function(){return u}));var n=a(0),i=a.n(n);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function p(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var c=i.a.createContext({}),o=function(e){var t=i.a.useContext(c),a=t;return e&&(a="function"==typeof e?e(t):p(p({},t),e)),a},b=function(e){var t=o(e.components);return i.a.createElement(c.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return i.a.createElement(i.a.Fragment,{},t)}},d=i.a.forwardRef((function(e,t){var a=e.components,n=e.mdxType,r=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),b=o(a),d=n,u=b["".concat(l,".").concat(d)]||b[d]||m[d]||r;return a?i.a.createElement(u,p(p({ref:t},c),{},{components:a})):i.a.createElement(u,p({ref:t},c))}));function u(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var r=a.length,l=new Array(r);l[0]=d;var p={};for(var s in t)hasOwnProperty.call(t,s)&&(p[s]=t[s]);p.originalType=e,p.mdxType="string"==typeof e?e:n,l[1]=p;for(var c=2;c<r;c++)l[c]=a[c];return i.a.createElement.apply(null,l)}return i.a.createElement.apply(null,a)}d.displayName="MDXCreateElement"}}]);