(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{172:function(e,n,t){"use strict";t.d(n,"a",(function(){return p})),t.d(n,"b",(function(){return m}));var r=t(0),i=t.n(r);function s(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function a(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){s(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function c(e,n){if(null==e)return{};var t,r,i=function(e,n){if(null==e)return{};var t,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)t=s[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)t=s[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var l=i.a.createContext({}),d=function(e){var n=i.a.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):a(a({},n),e)),t},p=function(e){var n=d(e.components);return i.a.createElement(l.Provider,{value:n},e.children)},b={inlineCode:"code",wrapper:function(e){var n=e.children;return i.a.createElement(i.a.Fragment,{},n)}},u=i.a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,s=e.originalType,o=e.parentName,l=c(e,["components","mdxType","originalType","parentName"]),p=d(t),u=r,m=p["".concat(o,".").concat(u)]||p[u]||b[u]||s;return t?i.a.createElement(m,a(a({ref:n},l),{},{components:t})):i.a.createElement(m,a({ref:n},l))}));function m(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var s=t.length,o=new Array(s);o[0]=u;var a={};for(var c in n)hasOwnProperty.call(n,c)&&(a[c]=n[c]);a.originalType=e,a.mdxType="string"==typeof e?e:r,o[1]=a;for(var l=2;l<s;l++)o[l]=t[l];return i.a.createElement.apply(null,o)}return i.a.createElement.apply(null,t)}u.displayName="MDXCreateElement"},75:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return o})),t.d(n,"metadata",(function(){return a})),t.d(n,"toc",(function(){return c})),t.d(n,"default",(function(){return d}));var r=t(3),i=t(7),s=(t(0),t(172)),o={title:"Composite"},a={unversionedId:"javascript/OOP_composite",id:"javascript/OOP_composite",isDocsHomePage:!1,title:"Composite",description:"\ub2e4\uc911 \uacc4\uce35\uc758 \ubb38\uc81c",source:"@site/docs/javascript/OOP_composite.md",slug:"/javascript/OOP_composite",permalink:"/docs/javascript/OOP_composite",version:"current",sidebar:"javascript",previous:{title:"Observer",permalink:"/docs/javascript/OOP_observer"}},c=[{value:"\ub2e4\uc911 \uacc4\uce35\uc758 \ubb38\uc81c",id:"\ub2e4\uc911-\uacc4\uce35\uc758-\ubb38\uc81c",children:[]},{value:"Composite",id:"composite",children:[]},{value:"\uac1d\uccb4\uc9c0\ud5a5 \ucef4\ud3ec\uc9c0\uc158 \u2192 \ub3d9\uc801 \uc704\uc784",id:"\uac1d\uccb4\uc9c0\ud5a5-\ucef4\ud3ec\uc9c0\uc158-\u2192-\ub3d9\uc801-\uc704\uc784",children:[{value:"ViewModelValue",id:"viewmodelvalue",children:[]},{value:"ViewModel",id:"viewmodel",children:[]}]},{value:"Observer",id:"observer",children:[]},{value:"client",id:"client",children:[]}],l={toc:c};function d(e){var n=e.components,t=Object(i.a)(e,["components"]);return Object(s.b)("wrapper",Object(r.a)({},l,t,{components:n,mdxType:"MDXLayout"}),Object(s.b)("h2",{id:"\ub2e4\uc911-\uacc4\uce35\uc758-\ubb38\uc81c"},"\ub2e4\uc911 \uacc4\uce35\uc758 \ubb38\uc81c"),Object(s.b)("pre",null,Object(s.b)("code",{parentName:"pre",className:"language-javascript"},"const viewmodel = ViewModel.get({\n  wrapper: ViewModel.get({styles: {width: '50%', background: '#ffa', cursor: 'pointer'}}),\n  title: ViewModel.get({properties: {innerHTML: 'Title'}}),\n  contents: ViewModel.get({properties: {innerHTML: 'Contents'}}),\n});\n")),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul"},"\ud30c\uc77c\uc2dc\uc2a4\ud15c : \ud3f4\ub354\uc548\uc5d0 \ud30c\uc77c\uc774 \ud3f4\ub354\uc548\uc5d0 \ud3f4\ub354"),Object(s.b)("li",{parentName:"ul"},"\uc54c\uace0\ub9ac\uc998 \ubb38\uc81c\uc5d0\uc11c\ub294 \ub3d9\uc801\uacc4\ud68d\ubc95, \ud2b8\ub9ac\ud0d0\uc0c9")),Object(s.b)("p",null,"\uc18d\ub3c4\ub294 \ub3d9\uc801\uacc4\ud68d\ubc95\uc774 \ub354 \ube60\ub974\uc9c0\ub9cc \uc815\ud615\ud654\ub41c \uc54c\uace0\ub9ac\uc998\uc5d0 \uac00\uba74 \ud2b8\ub9ac\ud0d0\uc0c9\uc774 \ub354 \uc27d\ub2e4."),Object(s.b)("h2",{id:"composite"},"Composite"),Object(s.b)("p",null,"\ub0b4 \ubb38\uc81c\ub97c \uc2a4\uc2a4\ub85c \ub2e4 \ud574\uacb0\ud558\uc9c0 \uc54a\uace0, \uc704\uc784\uc744 \ubc18\ubcf5\ud574\uc11c \uadf8\uac83\ub4e4\uc744 \ucde8\ud569\ud558\ub294 \ud589\uc704"),Object(s.b)("p",null,"\uc0c1\uc704 ViewModel \uc548\uc758 \ud558\uc704 ViewModel \uc5d0 \ubcc0\ud654\uac00 \uc77c\uc5b4\ub0ac\uc744 \ub54c,"),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul"},"\uc0c1\uc704 ViewModel \uc758 \ubcc0\ud654\ub294 \uc790\uae30\ub97c \uad6c\ub3c5 ",Object(s.b)("em",{parentName:"li"},"Observer")," Listen \ud558\uace0 \uc788\ub294 \ub300\uc0c1\uc5d0\uac8c notify \ub41c\ub2e4.")),Object(s.b)("p",null,"\ud558\uc704 ViewModel \ubcc0\ud654\ub97c, \uc0c1\uc704 ViewModel \uc774 Listen \uad6c\ub3c5\ud558\uac8c \ub9cc\ub4e4 \uace0\uc790 \ud55c\ub2e4."),Object(s.b)("p",null,"Binder \ub294 \ucd5c\uc0c1\uc704 ViewModel \uc744 \uc54c\uba74 \ubaa8\ub4e0 ViewModel \uc744 \ub2e4 \ub9e4\ud551\ud560 \uc218 \uc788\ub2e4."),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul"},"Binder \ub294  \ucd5c\uc0c1\uc704 ViewModel \uc640 \uacc4\uc57d\uc744 \ud558\uace0, \ud558\uc704 ViewModel \uacfc\ub294 \uacc4\uc57d\ud558\uc9c0 \uc54a\ub294\ub2e4."),Object(s.b)("li",{parentName:"ul"},"\ud558\uc704 ViewModel \uc758 \ubcc0\ud654\ub294",Object(s.b)("ul",{parentName:"li"},Object(s.b)("li",{parentName:"ul"},"\uc790\uc2e0\uc758 \ub9ac\uc2a4\ub108\uc5d0\uac8c\ub3c4 \uc54c\ub824\uc57c \ud558\uace0,"),Object(s.b)("li",{parentName:"ul"},"\uc0c1\uc704\uc758 \ub9ac\uc2a4\ub108\uc5d0\uac8c\ub3c4 \uc54c\ub824\uc57c \ud55c\ub2e4.")))),Object(s.b)("h2",{id:"\uac1d\uccb4\uc9c0\ud5a5-\ucef4\ud3ec\uc9c0\uc158-\u2192-\ub3d9\uc801-\uc704\uc784"},"\uac1d\uccb4\uc9c0\ud5a5 \ucef4\ud3ec\uc9c0\uc158 \u2192 \ub3d9\uc801 \uc704\uc784"),Object(s.b)("h3",{id:"viewmodelvalue"},"ViewModelValue"),Object(s.b)("p",null,"notification \uc73c\ub85c Observer \uac00 \uc218\uc2e0 \ubc1b\ub294 \uac1d\uccb4",Object(s.b)("br",{parentName:"p"}),"\n","info \uac1d\uccb4\ub77c\uace0 \ubd80\ub978\ub2e4."),Object(s.b)("h4",{id:"\uc778\ud3ec\uac1d\uccb4\uc758-\uc124\uacc4"},"\uc778\ud3ec\uac1d\uccb4\uc758 \uc124\uacc4"),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul"},"\uae30\ub2a5\uc774 \ubd80\uc871\ud558\uba74 \uc11c\ube0c\uc81d\ud2b8(ViewModel) \ub97c \ucc38\uc870\ud558\uac8c \ub41c\ub2e4.??"),Object(s.b)("li",{parentName:"ul"},"\ub108\ubb34 \ub9ce\uc73c\uba74 \uc720\uc9c0\ubcf4\uc218\ud560 \ub54c \ub9c8\ub2e4 \ub2e4\ub978 \ucf54\ub4dc\uac00 \ub2e4 \uae68\uc9c4\ub2e4.")),Object(s.b)("h4",{id:"subkey"},"subKey"),Object(s.b)("p",null,"\ubcc0\ud654 \ud55c \uac83\uc774 \uc774 \ub098 \uc790\uc2e0\uc778\uc9c0, \ud558\uc704 \ubdf0\ubaa8\ub378\uc778\uc9c0\ub97c \uad6c\ubd84\ud55c\ub2e4."),Object(s.b)("p",null,"\ubaa8\ub4e0 \uc790\uc2dd\ub4e4\uc774 \uace0\uc720\ud55c \uc11c\ube0c\ud0a4\ub97c \uac16\uace0 \uc788\ub2e4\uace0 \uac00\uc815\ud588\ub2e4."),Object(s.b)("pre",null,Object(s.b)("code",{parentName:"pre",className:"language-javascript"},"const ViewModelValue = class {\n  subKey;\n  cat;\n  k;\n  v;\n\n  constructor(subKey, cat, k, v) {\n    this.subKey = subKey;\n    this.cat = cat;\n    this.k = k;\n    this.v = v;\n    Object.freeze(this);\n  }\n};\n")),Object(s.b)("h3",{id:"viewmodel"},"ViewModel"),Object(s.b)("pre",null,Object(s.b)("code",{parentName:"pre",className:"language-javascript"},"const ViewModel = class extends ViewModelListener {\n  // ...\n  subKey = '';\n  parent = null;\n\n  // \ud558\uc704 ViewModel \uc774 \ubcc0\ud654\ud558\uba74 this isUpdated \uc5d0 \uc800\uc7a5\ud55c\ub2e4. \n  viewModelUpdated(updated) {\n    updated.forEach(v => this.#isUpdated.add(v));\n  }\n\n  constructor(checker, data, _ = type(data, 'object')) {\n    super();\n    // ViewModel \uc77c \ub54c k \ub294 [wrapper, title, contents], v \ub294 ViewModel \uc774\ub2e4.\n    Object.entries(data).forEach(([k, v]) => {\n      if ('styles,attributes,properties'.includes(k)) {\n        // ..\n      } else {  // << 'styles,attributes,properties' \uc5d0 \ud574\ub2f9\ud558\uc9c0 \uc54a\uac70\ub098 viewModel \uc77c \ub54c >> \n        Object.defineProperty(this, k, {\n          enumerable: true, get: _ => v, set: newV => {\n            v = newV;\n            // \ub0b4\uac00 \ubcf4\uace0 \ud560 \ub54c\ub294 \ub098\uc758 subKey \ub97c \ubcf4\uace0 \ud558\uba74 \uadf8\ub9cc\uc774\ub2e4. \n            // \ubd80\ubaa8\uc5d0\uc11c \uc218\uc2e0\ud588\uc744 \ub54c\ub294 \uc790\uc2dd\uac1d\uccb4 \uc785\uc7a5\uc774\uae30\ub3c4 \ud558\ub2e4.....\n            // \uc11c\ube0c\ud0a4\ub294 \uc790\uc2dd\uc774\uc790 \uc790\uae30\uc790\uc2e0\uc774\ub2e4.\n            // \ube59\ube59\ub3c4\ub294 \uac83 \uac19\uc9c0\ub9cc \uc219\ub828\uc774 \ud544\uc694\ud558\ub2e4.\n            this.#isUpdated.add(new ViewModelValue(this.subKey, '', k, v));\n          },\n        });\n        \n        /*\n          << \ud558\uc704 ViewModel \uc774 \uc874\uc7ac\ud560 \ub54c \ucd94\uac00\uc801\uc73c\ub85c>>\n          \ud558\uc704 ViewModel \ub77c\uba74, \uc790\uc2e0\uc758 \ubcc0\ud654\ub97c \uc0c1\uc704 ViewModel \uc5d0\uac8c \uc804\ub2ec(\uc804\ud30c)\ud574\uc57c \ud55c\ub2e4.\n          \uc0c1\uc704 ViewModel \ub77c\uba74, \ud558\uc704 ViewModel \uc758 \ubcc0\ud654\ub97c \uc218\uc2e0\ud574\uc57c \ud55c\ub2e4.\n          - \uc0c1\uc704 ViewModel(\uc11c\ube0c\uc81d\ud2b8) \uac00 Observer \uac00 \ub418\uc5b4\uc57c \ud55c\ub2e4.\n          - \uc11c\ube0c\uc81d\ud2b8\uac00 \ub9ac\uc2a4\ub108\uac00 \uc544\ub2d0 \ub54c \uae4c\uc9c0 \ubcc0\ud654\uac00 \uc804\ud30c\ub418\uc5b4\uc57c \ud55c\ub2e4.\n          - \uc678\ubd80\uc5d0 \uc804\ud30c\ud560 \ub54c, subKey(\uc790\uc2e0\uc778\uc9c0 \ud558\uc704 ViewModel \uc758 \ubcc0\ud654\uc778\uc9c0\ub97c \uad6c\ubd84) \ub97c \uc54c\ub9b0\ub2e4.\n        */\n        // \ub0b4 \uc790\uc2dd\uc758 \ubcc0\ud654\uc778 \uac83\uc744 \uc54c\ub824\uba74, \ub0b4\uac00 \uc544\ub2cc \ub798\ud37c/\ud0c0\uc774\ud2c0/ \uc774 \uc77c\uc73c\ud0a8 \ubcc0\ud654\ub77c\ub294 \uac83\uc744 \uc54c\uc544\uc57c \ud55c\ub2e4.\n        // \ub798\ud37c\uc758 \uc2a4\ud0c0\uc77c\uc2a4\uc758 \ubc31\uadf8\ub77c\uc6b4\ub4dc\uc758 \ubcc0\ud654\ub97c \uc54c\uc544\uc57c\uc9c0\ub9cc \ubc18\uc751\uc744 \ud560 \uc218 \uc788\ub2e4.\n        // \ub450\ubc88\uc9f8\ub85c \uc6d0\ub798\ub294 \ubdf0\ubaa8\ub378\uc740 \ubd80\ubaa8\uc790\uc2dd\uac1c\ub150\uc774 \uc5c6\uc9c0\ub9cc, \uc774 \uac1c\ub150\uc774 \uc0dd\uacbc\ub2e4\n        // \ubd80\ubaa8\uc0ac\uc815\uc5d0\uc11c \uc11c\ube0c\ud0a4\ub97c \ud560\ub2f9\ud574 \uc8fc\uc5c8\ub2e4. \uc790\uc2dd\uc774 \ubcc0\ud654\ud588\uc744 \ub54c \ubd80\ubaa8\uc5d0\uac8c nofify \ub41c\ub2e4. \n        if (v instanceof ViewModel) {\n          // \uc11c\ube0c\uc5d0\uc11c\ub294 \ubd80\ubaa8\ub97c \uc54c\uac8c\ub41c\ub2e4. \n          // \uc790\uc2dd\uc758 \uc11c\ube0c\ud0a4\uac00 \ubb54\uc9c0\ub294 \ubd80\ubaa8 \uc785\uc7a5\uc774\ub2e4.\"\ub798\ud37c/\ud0c0\uc774\ud2c0\" \ud560\ub2f9 \n          // \uc790\uc2dd\uc774 \ub204\uad6c\uc758 \uc18c\uc18d\uc77c \ub54c \ud560\ub2f9\ub41c\ub2e4.\n          // \uc774\ubca4\ud2b8 \ub9ac\uc2a4\ub108\uc5d0\uac8c vm \uc744 \uc8fc\ub294\ub370, \uadf8 vm \uc740 \uc790\uae30 \uc790\uc2e0 vm \uc774 \ub420 \uac83\uc774\ub2e4.\n          // \ud1b5\ud569\uc0dd\uc131\uc744 \ubabb\ud558\uae30 \ub54c\ubb38\uc5d0??\uadf8\uc804\uc5d0\ub294 \ubaa8\ub4e0 \uc774\ubca4\ud2b8 \ub9ac\uc2a4\ub108\uc5d0\n          // \uc790\uc2dd\uc774 \ubb50\uac00\uc624\ub4e0 \ud0d1 vm \uc744 \ub123\ub294 \uac83\uc744 \ub123\uc5c8\ub294\ub370\n          // \uc774\uc81c\ub294 \uadf8\ub807\uac8c \uc548\ub418\uae30 \ub54c\ubb38\uc5d0 \ub098\ubc16\uc5d0 \ubaa8\ub978\ub2e4.\n          // \ub0b4 \ubd80\ubaa8\ub97c \ud0c0\uace0\uac00\uc11c \uc54c\uc218 \uc788\ub2e4. \uc5ed\ucc38\uc870\ud558\ub294 \ub798\ud37c\ub7f0\uc2a4\ub97c \uac78\uc5b4\uc900\ub2e4. \n          v.parent = this;\n          v.subKey = k;\n          // \ubd80\ubaa8\ub294 \uc790\uc2dd\uc758 \ub9ac\uc2a4\ub108\uac00 \ub41c\ub2e4.\n          v.addListener(this);\n        }\n      }\n    });\n    // 5) \uccab\ubc88\uc9f8 \ub370\uc774\ud130\uac00 \uc644\uc131\ub418\uace0\ub098\uba74 \ubcc0\ud654\uac00 \uc5c6\uc9c0\ub9cc (\uc544\uc9c1 setter \uac00 \ud55c\ubc88\ub3c4 \uc548\uc77c\uc5b4\ub0a8)\n    // \uc0c8\ub85c\ub9cc\ub4e4\uc5b4\uc84c\uae30 \ub54c\ubb38\uc5d0 notify \ub97c \ud55c\ubc88 \ub54c\ub824\uc57c\ud55c\ub2e4.\n    // notify \uac00 \uc18d\uc131\uc774 \ubc14\ub014 \ub54c \ub9c8\ub2e4 \ub54c\ub9ac\uba74 \ubc14\uc778\ub354\uc758 \ub80c\ub354\uac00 \ubbf8\uce5c\ub4ef\uc774 \uc77c\uc5b4\ub0a0 \uac83\uc774\ub2e4.\n  // \ub80c\ub354\ub77c\ub294 \uac83\uc740 \uc5b4\ucc28\ud53c requestAnimationFrame \ub97c \ucd08\uacfc\ud574\uc11c \uc77c\uc5b4\ub098\uc9c0 \uc54a\ub294\ub2e4. \n    // \ub530\ub77c\uc11c requestAnimationFrame \ub2f9 \ubcc0\ud654\ub97c \ucde8\ud569\ud574\uc11c \ub584\ub9ac\uba74 \ub41c\ub2e4. \n    // \uadf8\ub7ec\uba74 \ubdf0\ubaa8\ub378 \ub808\ubca8\uc5d0\uc11c \ud558\ub098\uc758 requestAnimationFrame \ud558\ub098\ub9cc \uac78\uace0 \uac70\uae30\uc5d0 \ud55c\uac70\ubc88\uc5d0 \uc870\ud68c\ud574\uc11c \ubaa8\ub4e0 notification \uc744 \ud55c\uaebc\ubc88\uc5d0 \ub54c\ub9ac\uba74\ub41c\ub2e4.\n    // notify \uc758 \uc815\uc801\ud074\ub798\uc2a4\uc5d0 \ud55c\ubc88 \ubd80\ud0c1\ud558\ub294 \uac83\uc774\ub2e4. ...\n    ViewModel.notify(this);\n    Object.seal(this);\n  }\n\n}\n\n")),Object(s.b)("p",null,"\uc11c\ube0c\uc81d\ud2b8\uc774\uc790 \ub9ac\uc2a4\ub108\uc778 \uc635\uc800\ubc84\uac00 \ub300\ubd80\ubd84\uc774\ub2e4.\n\uadf8\ub7ec\uae30 \ub54c\ubb38\uc5d0 \ubdf0 \ubaa8\ub378\uc744 \ubdf0\ubaa8\ub378\ub9ac\uc2a4\ub108\ub97c \uc0c1\uc18d\ubc1b\ub3c4\ub85d \uac1c\uc870\ud588\ub2e4."),Object(s.b)("pre",null,Object(s.b)("code",{parentName:"pre",className:"language-javascript"},"const ViewModel = class extends ViewModelListener {\n  static;\n  #subjects = new Set;\n  static;\n  #inited = false;\n\n  // \uc635\uc800\ubc84\uc5d0\uac8c \ud1b5\ubcf4\ud560 \uc11c\ube0c\uc81d\ud2b8\ub4e4\uc758 \ubaa8\uc784\uc774\ub2e4. \n  // \ub0b4\ubd80\uc5d0\uc11c\ub294 \ud0c0\uc785\uccb4\ud06c\ub97c \ud560 \ud544\uc694 \uc5c6\ub2e4.\n  static notify(vm) {\n    // inited \uac00 \ud544\uc694\ud55c \uc774\uc720\ub294\n    // requestAnimationFrame \uc744 \ud55c\ubc88 \ubc1c\ub3d9\ud558\uba74 \uacc4\uc18d \ubc1c\ub3d9\ud558\ub2c8\uae50. \ucd5c\ucd08\ub85c \ubc1c\ub3d9\ud558\uc9c0\ub9d0\uc9c0 \uacb0\uc815?\n    this.#subjects.add(vm);\n    if (this.#inited) return;\n    this.#inited = true;\n    // notify \uac00 \ud55c\ud504\ub808\uc784\ub2f9 \ud55c\ubc88\ub9cc \ud638\ucd9c \ub420 \uac83\uc774\ub2e4. \n    const f = _ => {  \n      this.#subjects.forEach(vm => {\n        // \uc5c5\ub370\uc774\ud2b8 \ub410\ub2e4\ub294 \uc758\n        if (vm.#isUpdated.size) {\n          vm.notify();\n          vm.#isUpdated.clear();\n        }\n      });\n      requestAnimationFrame(f);\n    };\n    requestAnimationFrame(f);\n  }\n\n  subKey = '';\n  parent = null;\n\n  constructor(checker, data, _ = type(data, 'object')) {\n    // ...\n    // \uc0dd\uc131\ud560 \ub54c \ud55c\ubc88\uc740 notify \ud574\uc8fc\uba74\n    // subject \uc5d0 \ub4f1\ub85d\uc774 \ub420 \uac83\uc774\ub2e4. \n    ViewModel.notify(this);\n    Object.seal(this);\n  }\n}\n")),Object(s.b)("h2",{id:"observer"},"Observer"),Object(s.b)("p",null,"\ubdf0\ubaa8\ub378\uc758 \uc2e4\uc9c8\uc801\uc778 \uc8fc\uc778\uc740 \ubc14\uc778\ub354\uc774\ub2e4\n\ubc14\uc778\ub354\uac00 \ubdf0\ubaa8\ub378\uc744 \uad6c\ub3c5\ud55c\ub2e4."),Object(s.b)("p",null,"\ubc14\uc778\ub354(\uc635\uc800\ubc84)\ub294 \ubdf0\ubaa8\ub378 \ub9ac\uc2a4\ub108\uc774\uae30\ub3c4 \ud558\ub2e4\n\uc5ec\ub7ec \uc5ed\ud560\uc744 \ud558\uac8c \ub410\ub2e4. \uc778\ud130\ud398\uc774\uc2a4\ub85c \ubd84\ub9ac\ud55c\ub2e4."),Object(s.b)("pre",null,Object(s.b)("code",{parentName:"pre",className:"language-javascript"},"const Binder = class extends ViewModelListener {\n  #items = newSet;\n  #processors = {};\n  add(v, _ = type(v, BinderItem)) {\n    this.#items.add(v);\n  }\n  addProcessor(v, _0 = type(v, Processor)) {\n    this.#processors[v.cat] = v;\n  }\n  render(viewmodel, _ = type(viewmodel, ViewModel)) {\n    const processores = Object.entries(this.#processors);\n    this.#items.forEach(item => {\n      const vm = type(viewmodel[item.viewmodel], ViewModel), el = item.el;\n      processores.forEach(([pk, processor]) => {\n        Object.entries(vm[pk]).forEach(([k, v]) => {\n          processor.process(vm, el, k, v);\n        });\n      });\n    });\n  }\n};\n")),Object(s.b)("p",null,"\ub80c\ub354\ud560\ub54c\ub3c4 process \ub97c \ud588\ub294\ub370, \uc5ec\uae30\ub3c4 \uc788\ub2e4.\n\ub450\uacf3\uc774\uc0c1\uc758 \uc54c\uace0\ub9ac\uc998\uc5d0 \uac1c\uc785\ud558\ub294 \uc678\ubd80\uc5d0\uc11c \uacf5\uae09\ub41c \uc804\ub7b5\uc744 \ube44\uc9c0\ud130\ub77c\uace0 \ud55c\ub2e4. "),Object(s.b)("pre",null,Object(s.b)("code",{parentName:"pre",className:"language-javascript"},"const Binder = class extends ViewModelListener {\n  #items = new Set;\n  #processors = {};\n  // 2) updated Set \uc5d0\ub294 \ubdf0\ubaa8\ub378 \uac12\uc774 \ub4e4\uc5b4\uc788\ub2e4. \uc11c\ube0c\ud0a4, \uce74\ud14c\uace0\ub9ac\ud0a4, value,..  \n  viewmodelUpdated(updated) {\n    const items = {};\n    // #items\uac00 Set \uc774\uae30 \ub54c\ubb38\uc5d0 \uc989\uac01\uc801\uc778 \uc870\ud68c\uac00 \ud798\ub4e4\uc5b4\uc11c?? \n    // #items \uc744 items \ub85c \ud658\uc6d0\uc2dc\ud0a4\ub824 \ud55c\ub2e4. Set \uc740 forEach \ubc16\uc5d0 \ubabb\uc368\uc11c obj \ub85c \ud658\n    this.#items.forEach(item => { \n      // [\ub798\ud37c\uac1d\uccb4, \uc544\uc774\ud15c\uc758 \uc694\uc18c]\n      items[item.viewmodel] = [type(viewmodel[item.viewmodel], ViewModel), item.el];\n    });\n    updated.forEach(v => {\n      if (!items[v.subKey]) return;\n      const [vm, el] = items[v.subKey], processor = this.#processors[v.cat];\n      if (!el || !processor) return;\n      processor.process(vm, el, v.k, v.v);\n    });\n  }\n  add(v, _ = type(v, BinderItem)) {\n    this.#items.add(v);\n  }\n  addProcessor(v, _0 = type(v, Processor)) {\n    // ..\n  }\n  render(viewmodel, _ = type(viewmodel, ViewModel)) {\n    // ..\n  }\n  // 1) \ubc14\uc778\ub354\uc5d0\uc11c\ub294 \ubdf0\ubaa8\ub378\uc744 \ubc1b\uc544\uc11c \uc790\uc2e0\uc758 \ub9ac\uc2a4\ub108\ub97c \ud558\uace0, \ucd5c\ucd08\ub85c \ub80c\ub354\ub97c \ud574\uc900\ub2e4.\n  // \ud2b9\uc815 \ubdf0\ubaa8\ub378\uc5d0 \ub9ac\uc2a4\ub108\ub85c \ub4f1\ub85d\ub418\uace0 \ub9d0\uace0\ub97c \uacb0\uc815\ud55c\ub2e4. \n  watch(viewmodel, _ = type(viewmodel, ViewModel)) {\n    viewmodel.addListener(this);\n    this.render(viewmodel);\n  }\n  unwatch(viewmodel, _ = type(viewmodel, ViewModel)) {\n    viewmodel.removeListener(this);\n  }\n};\n")),Object(s.b)("h2",{id:"client"},"client"),Object(s.b)("pre",null,Object(s.b)("code",{parentName:"pre",className:"language-javascript"},"const scanner = new Scanner;\nconst binder = scanner.scan(document.querySelector('#target'));\nbinder.addProcessor(new (class extends Processor {\n  _process(vm, el, k, v) {\n    el.style[k] = v;\n  }\n})('styles'));\nbinder.addProcessor(new (class extends Processor {\n  _process(vm, el, k, v) {\n    el.setAttribute(k, v);\n  }\n})('attributes'));\nbinder.addProcessor(new (class extends Processor {\n  _process(vm, el, k, v) {\n    el[k] = v;\n  }\n})('properties'));\nbinder.addProcessor(new (class extends Processor {\n  _process(vm, el, k, v) {\n    console.log('event', k, v, el);\n    el['on' + k] = e => v.call(el, e, vm);\n  }\n})('events'));\n")),Object(s.b)("pre",null,Object(s.b)("code",{parentName:"pre",className:"language-javascript"},"const viewmodel = ViewModel.get({\n  isStop: false, changeContents() {\n    this.wrapper.styles.background = `rgb(${..})`;\n    this.contents.properties.innerHTML = Math;\n    // ...\n    ;\n  }, \n  wrapper: ViewModel.get({\n    styles: {width: '50%', background: '#ffa', cursor: 'pointer'}, events: {\n      click(e, vm) {\n        // \uc790\uc2dd vm \ub3c4 vm \uac1d\uccb4\uc774\uace0\n        // vm \uc740 \ubb34\uc870\uac74 wrapper \uc774\ub2e4. \uc5b4\ud734..    \n        // \ubd80\ubaa8\uc5d0 \uc788\ub294 \uac83\uc744 \ubc14\uafb8\uace0 \uc2f6\uc744\ub550 \uac04\uc811\ucc38\uc870\uc778 parent \uc5d0 \uc788\ub294 \uac83\uc744 \ubc14\uafbc\ub2e4. \n        vm.parent.isStop = true;\n        console.log('click', vm);\n      },\n    },\n  }), \n  title: /* .. */ , \n  contents: /* .. */ ,\n});\n")),Object(s.b)("pre",null,Object(s.b)("code",{parentName:"pre",className:"language-javascript"},"binder.watch(viewmodel);\nconst f = _ => {\n  viewmodel.changeContents();\n  if (!viewmodel.isStop) requestAnimationFrame(f);\n};\nrequestAnimationFrame(f);\n")),Object(s.b)("p",null,"\ubc14\uc778\ub354.\ub80c\ub354\uac00 \uc5c6\uc5b4\uc84c\ub2e4.\n\ubdf0\ubaa8\ub378\uc758 \uac12\ub9cc \ubc14\uafbc\ub2e4.\n\uc644\uc804\ud55c \ubc84\uc804\uc758 MVVM \uc774\ub2e4..\nMVVM \uc740 \ubdf0\ubaa8\ub378\ub9cc \uac74\ub4dc\ub838\ub2e4.... "),Object(s.b)("p",null,"\ubc14\uc778\ub354\ub97c \ub354\uc774\uc0c1 call \ud558\uc9c0\uc54a\uace0\nnotification \uc744 \ud55c\ud504\ub808\uc784\uc5d0 \ud55c\ubc88\ud558\uac8c \ub41c\ub2e4. "),Object(s.b)("p",null,"\ud604\uc2e4\uc138\uacc4\uc5d0\uc11c \uc4f0\uae30 \ud798\ub4e4\ub2e4.\n\uc804\ub7b5\ud328\ud134\n\ud0ec\ud50c\ub9bf\uba54\uc11c\ub4dc\ud328\ud134\n\uc635\uc800\ube0c\n\ucef4\ud3ec\uc9d3 \ud328\ud134\ub9cc \uc798\uc368\ub3c4\n\ub9ce\uc740 \ubb38\uc81c\ub97c \ud574\uacb0\ud560 \uc218 \uc788\ub2e4. "),Object(s.b)("p",null,"\ub2e4\uc74c\uc2dc\uac04\uc5d0\ub294\n\ubc30\uc5f4\ubc1b\uc544\uc11c \ub3d4\uc5d8\ub9ac\uba3c\ud2b8\ub97c \ub9cc\ub4e4\uc5b4\uc8fc\ub294\uac83\uc744 \ud560 \uac83\uc774\ub2e4."))}d.isMDXComponent=!0}}]);