(window.webpackJsonp=window.webpackJsonp||[]).push([[136],{207:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return s})),n.d(t,"metadata",(function(){return c})),n.d(t,"toc",(function(){return l})),n.d(t,"default",(function(){return d}));var i=n(3),r=n(7),a=(n(0),n(369)),s={title:"ISP"},c={unversionedId:"javascript/OOP/OOP_code_ISP",id:"javascript/OOP/OOP_code_ISP",isDocsHomePage:!1,title:"ISP",description:"\uac1d\uccb4\uc9c0\ud5a5 \ud504\ub85c\uadf8\ub798\ubc0d",source:"@site/docs/javascript/OOP/OOP_code_ISP.md",slug:"/javascript/OOP/OOP_code_ISP",permalink:"/docs/javascript/OOP/OOP_code_ISP",version:"current",sidebar:"javascript",previous:{title:"Observer 2",permalink:"/docs/javascript/OOP/OOP_observer2"},next:{title:"\uc12c\uc138\ud55c \uad8c\ud55c \uc870\uc815",permalink:"/docs/javascript/OOP/OOP_access"}},l=[{value:"<em>\uac1d\uccb4\uc9c0\ud5a5 \ud504\ub85c\uadf8\ub798\ubc0d</em>",id:"\uac1d\uccb4\uc9c0\ud5a5-\ud504\ub85c\uadf8\ub798\ubc0d",children:[]},{value:"\ucc45\uc784\uacfc \uc5ed\ud560",id:"\ucc45\uc784\uacfc-\uc5ed\ud560",children:[]},{value:"ISP",id:"isp",children:[{value:"\ubdf0\ubaa8\ub378\uc758 \uc5ed\ud560",id:"\ubdf0\ubaa8\ub378\uc758-\uc5ed\ud560",children:[]}]}],o={toc:l};function d(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(a.b)("wrapper",Object(i.a)({},o,n,{components:t,mdxType:"MDXLayout"}),Object(a.b)("iframe",{width:"560",height:"315",src:"https://www.youtube.com/embed/r4vOF7WpxgM",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:!0}),Object(a.b)("h2",{id:"\uac1d\uccb4\uc9c0\ud5a5-\ud504\ub85c\uadf8\ub798\ubc0d"},Object(a.b)("em",{parentName:"h2"},"\uac1d\uccb4\uc9c0\ud5a5 \ud504\ub85c\uadf8\ub798\ubc0d")),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"\ucc98\uc74c\uc5d0 \uc774\ub8e8\uace0\uc790 \ud558\ub294 \ubaa9\ud45c \uc5d0\uc11c\ubd80\ud130, ",Object(a.b)("em",{parentName:"li"},"\ub369\uc5b4\ub9ac\ub4e4\uc744 \ucc28\uadfc\ucc28\uadfc \ubd84\ub9ac\ud558\uace0 \uae4e\uc544\ub0b4 \uacfc\ub294 \uacfc\uc815"),"\uc774\ub77c\uace0 \ud560 \uc218 \uc788\ub2e4."),Object(a.b)("li",{parentName:"ul"},"\ub369\uc5b4\ub9ac\ucf54\ub4dc\ub97c ",Object(a.b)("strong",{parentName:"li"},"\ud074\ub798\uc2a4\ub85c \ubd84\ub9ac"),"\ud574\uc11c \uae4e\uc544 \ub0b8\ub2e4."),Object(a.b)("li",{parentName:"ul"},Object(a.b)("strong",{parentName:"li"},"\uc5ed\ud560(\ucc45\uc784)\uc744 \uae30\uc900"),"\uc73c\ub85c \uae4e\uc544\ub0b8\ub2e4.")),Object(a.b)("h2",{id:"\ucc45\uc784\uacfc-\uc5ed\ud560"},"\ucc45\uc784\uacfc \uc5ed\ud560"),Object(a.b)("p",null,"\ucc45\uc784\ud558\uace0 \uc5ed\ud560\uc740 \ube44\uc2b7\ud574 \ubcf4\uc774\uc9c0\ub9cc \ub3d9\uc804\uc758 \uc591\uba74\uc774\ub2e4."),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"\ucc45\uc784\uc744 \uc9c4\ub2e4\ub294 \uac83",Object(a.b)("br",{parentName:"li"}),"\u2192 \ucc45\uc784\uc5d0 \ub9de\ub294 \uad8c\ud55c\ub3c4 \uac16\uace0 \uc788\ub2e4\ub294 \uc774\uc57c\uae30\ub2e4.")),Object(a.b)("p",null,"\ubc18\ub300\ub85c \uad8c\ud55c\uc774 \uc5c6\ub294\ub370 \ucc45\uc784\ub9cc \uc788\uc73c\uba74 \uae30\ubd84\uc774 \ub098\uc058\uaca0\uc8e0 "),Object(a.b)("p",null," \uac70\uafb8\ub85c, \ucc45\uc784\uc744 \uc9c0\uc9c0 \uc54a\uace0 \uad8c\ud55c\uc744 \ud718\ub450\ub974\uba74? ..."),Object(a.b)("h2",{id:"isp"},"ISP"),Object(a.b)("p",null,Object(a.b)("em",{parentName:"p"},"\uc778\ud130\ud398\uc774\uc2a4 \ubd84\ub9ac \uc6d0\uce59"),"\uc5d0 \ub530\ub77c \ub369\uc5b4\ub9ac \uc9c4 ",Object(a.b)("strong",{parentName:"p"},"\ucf54\ub4dc\ub97c \ubd84\ub9ac"),"\ud560 \uc218 \uc788\ub2e4. "),Object(a.b)("p",null,"\uc774\ub54c \ub9d0\ud558\ub294 \uc778\ud130\ud398\uc774\uc2a4\ub294 \uc2e4\uc81c\uc801\uc73c\ub85c, \ubb3c\ub9ac\uc801\uc778 \uc778\ud130\ud398\uc774\uc2a4\uac00 \uc544\ub2cc, ",Object(a.b)("strong",{parentName:"p"},"\uc5ed\ud560"),"\uc744 \uc774\uc57c\uae30\ud55c\ub2e4."),Object(a.b)("details",null,Object(a.b)("summary",null,"\uc6b0\ub9ac\uac00 \ub9cc\ub4e0 ViewModel \ub294 \ub9e4\uc6b0 Heavy \ud558\ub2e4"),Object(a.b)("p",null,Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-javascript"},"const ViewModel = class extends ViewModelListener {\n  static get(data) {\n    return new ViewModel(data);\n  }\n\n  styles = {};\n  attributes = {};\n  properties = {};\n  events = {};\n  \n  #isUpdated = new Set;\n  #listeners = new Set;\n\n  subKey = '';\n  parent = null;\n\n  static #subjects = new Set;\n  static #inited = false;\n\n\n  addListener(v, _ = type(v, ViewModelListener)) {\n    this.#listeners.add(v);\n  }\n\n  removeListener(v, _ = type(v, ViewModelListener)) {\n    this.#listeners.delete(v);\n  }\n\n  viewModelUpdated(updated) {\n    updated.forEach(v => this.#isUpdated.add(v));\n  }\n\n  static notify(vm) {\n    this.#subjects.add(vm);\n    if (this.#inited) return;\n    this.#inited = true;\n\n    const f = _ => {  \n      this.#subjects.forEach(vm => {\n        if (vm.#isUpdated.size) {\n          vm.notify();\n          vm.#isUpdated.clear();\n        }\n      });\n      requestAnimationFrame(f);\n    };\n    requestAnimationFrame(f);\n  }\n\n  constructor(checker, data, _ = type(data, 'object')) {\n    super();\n    Object.entries(data).forEach(([k, v]) => {\n      if ('styles,attributes,properties'.includes(k)) {\n        // ..\n      } else {  \n        Object.defineProperty(this, k, {\n          enumerable: true, get: _ => v, set: newV => {\n            v = newV;\n            this.#isUpdated.add(new ViewModelValue(this.subKey, '', k, v));\n          },\n        });\n\n        if (v instanceof ViewModel) {\n          v.parent = this;\n          v.subKey = k;\n          v.addListener(this);\n        }\n      }\n    });\n\n    ViewModel.notify(this);\n    Object.seal(this);\n  }\n}\n")))),Object(a.b)("h3",{id:"\ubdf0\ubaa8\ub378\uc758-\uc5ed\ud560"},"\ubdf0\ubaa8\ub378\uc758 \uc5ed\ud560"),Object(a.b)("p",null,"\ubb3c\ub9ac\uc801\uc778 \ubdf0\ub97c \ub300\uc2e0\ud574\uc11c \uc778\uba54\ubaa8\ub9ac \uc548\uc5d0 \uc21c\uc218\ud55c \uba54\ubaa8\ub9ac \uac1d\uccb4\ub85c\uc11c\uc758 \ubdf0\ub97c \ub9cc\ub4e4\uc5b4 \ub0b4\ub294 \uac83"),Object(a.b)("p",null,"\ubdf0\ubaa8\ub378\uc740 \ubdf0\ub97c \ub300\uc2e0\ud558\ub294 \ubaa8\ub378\uc778\ub370 \ubdf0\ubaa8\ub378\uc774 \uc544\ub798 \uba54\uc11c\ub4dc\ub97c \uac16\uace0 \uc788\ub294\uac8c \ub9de\uc744\uae4c?"),Object(a.b)("h4",{id:"1-observer-\ud328\ud134\uc5d0\uc11c\uc758-subject-\uc5ed\ud560"},"1. Observer \ud328\ud134\uc5d0\uc11c\uc758 Subject \uc5ed\ud560"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-javascript"},"#isUpdated = new Set; \n#listeners = new Set;\naddListener(v, _ = type(v, ViewModelListener)) {\n  this.#listeners.add(v);\n}\nremoveListener(v, _ = type(v, ViewModelListener)) {\n  this.#listeners.delete(v);\n}\nnotify() {\n  this.#listeners.forEach(v => v.viewmodelUpdated(this.#isUpdated));\n}\n")),Object(a.b)("p",null,"\uc778\ud130\ud398\uc774\uc2a4 \ubd84\ub9ac\uc6d0\uce59\uc5d0 \ub530\ub77c \ubd84\ub9ac\ud574\ubcf4\uc790"),Object(a.b)("p",null,Object(a.b)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/31977543/113152226-e0c60b80-9270-11eb-802c-e7719815895e.png",alt:"image"})),Object(a.b)("p",null,Object(a.b)("em",{parentName:"p"},"#isUpdated")," \uac00 #info Set \uc73c\ub85c \ubc14\ub010\uac83 \uc774\uc678\ub294 \uac70\uc758 \ub2e4 \ube44\uc2b7\ud558\ub2e4.\nadd \uc640 clear \uac00 \ucd94\uac00 \ub418\uc5c8\ub2e4."),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-javascript"},"const ViewModelSubject = class extends ViewModelListener {\n  #info = new Set;\n  #listeners = new Set;\n  add(v, _ = type(v, ViewModelValue)) {\n    this.#info.add(v);\n  }\n  clear() {\n    this.#info.clear();\n  }\n  addListener(v, _ = type(v, ViewModelListener)) {\n    this.#listeners.add(v);\n    ViewModelSubject.watch(this);\n  }\n  removeListener(v, _ = type(v, ViewModelListener)) {\n    this.#listeners.delete(v);\n    if (!this.#listeners.size) ViewModelSubject.unwatch(this);\n  }\n  notify() {\n    this.#listeners.forEach(v => v.viewmodelUpdated(this.#info));\n  }\n};\n")),Object(a.b)("h4",{id:"2-notify-\uc778\ub370-add-\uc5ed\ud560\uc774-\uc11e\uc5ec\uc788\ub2e4"},"2. notify \uc778\ub370 add \uc5ed\ud560\uc774 \uc11e\uc5ec\uc788\ub2e4."),Object(a.b)("p",null,"\uadf8\ub9ac\uace0 notify \ubcf4\ub2e4\ub294 watch \uc640 unwatch \uac00 \uc678\ubd80\uc785\uc7a5\uc5d0\uc11c \uc911\uc694\ud558\ub2e4"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-javascript"},"static #subjects = new Set;\nstatic #inited = false;\nstatic notify(vm) {\n  this.#subjects.add(vm);\n  if (this.#inited) return;\n  this.#inited = true;\n  cons f = _ => {\n    this.#subjects.forEach(vm => {\n      if (vm.#isUpdated.size) {\n        vm.notify();\n        vm.#isUpdated.clear();\n      }\n    });\n    requestAnimationFrame(f);\n  };\n  requestAnimationFrame(f);\n}\n")),Object(a.b)("p",null,"after"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-javascript"},"static #subjects = new Set;\nstatic #inited = false;\nstatic notify() {\n  const f = _ => {\n    this.#subjects.forEach(v => {\n      if (v.#info.size) {\n        v.notify();\n        v.clear();\n      }\n    });\n    if (this.#inited) requestAnimationFrame(f);\n  };\n  requestAnimationFrame(f);\n}\nstatic watch(vm, _ = type(vm, ViewModelListener)) {\n  this.#subjects.add(vm);\n  if (!this.#inited) {\n    this.#inited = true;\n    this.notify();\n  }\n}\nstatic unwatch(vm, _ = type(vm, ViewModelListener)) {\n  this.#subjects.delete(vm);\n  if (!this.#subjects.size) this.#inited = false;\n}\n")),Object(a.b)("p",null,"\uc790\ubc14\uc2a4\ud06c\ub9bd\ud2b8\uc758 \uc2f1\uae00\uc4f0\ub808\ub4dc \uae30\ubc18\uc740 flag \uc81c\uc5b4\uac00 \uc27d\ub2e4."))}d.isMDXComponent=!0},369:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return m}));var i=n(0),r=n.n(i);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var o=r.a.createContext({}),d=function(e){var t=r.a.useContext(o),n=t;return e&&(n="function"==typeof e?e(t):c(c({},t),e)),n},b=function(e){var t=d(e.components);return r.a.createElement(o.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},u=r.a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,a=e.originalType,s=e.parentName,o=l(e,["components","mdxType","originalType","parentName"]),b=d(n),u=i,m=b["".concat(s,".").concat(u)]||b[u]||p[u]||a;return n?r.a.createElement(m,c(c({ref:t},o),{},{components:n})):r.a.createElement(m,c({ref:t},o))}));function m(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var a=n.length,s=new Array(a);s[0]=u;var c={};for(var l in t)hasOwnProperty.call(t,l)&&(c[l]=t[l]);c.originalType=e,c.mdxType="string"==typeof e?e:i,s[1]=c;for(var o=2;o<a;o++)s[o]=n[o];return r.a.createElement.apply(null,s)}return r.a.createElement.apply(null,n)}u.displayName="MDXCreateElement"}}]);